from flask import Flask, render_template, request, make_response
import google.generativeai as genai
import hashlib
import time

app = Flask(__name__)

genai.configure(api_key="AIzaSyA7R60JR9NOKObDkKi7nm9nDonpOPyMes4")

generation_config = {"temperature": 0.33, "top_p": 1, "top_k": 1, "max_output_tokens": 4096}

safety_settings = [
    {"category": "HARM_CATEGORY_HARASSMENT", "threshold": "BLOCK_ONLY_HIGH"},
    {"category": "HARM_CATEGORY_HATE_SPEECH", "threshold": "BLOCK_ONLY_HIGH"},
    {"category": "HARM_CATEGORY_SEXUALLY_EXPLICIT", "threshold": "BLOCK_ONLY_HIGH"},
    {"category": "HARM_CATEGORY_DANGEROUS_CONTENT", "threshold": "BLOCK_ONLY_HIGH"},
]

model = genai.GenerativeModel(
    model_name="gemini-pro", generation_config=generation_config, safety_settings=safety_settings
)

# Dictionary to store chat history for each session
sessions = {}


# Flask route for the home page
@app.route('/')
def home():
    global model
    session_id = get_or_create_session_id(request)
    history = get_or_create_session_history(session_id)
    if sessions[session_id]:
        del sessions[session_id]
    convo = model.start_chat(history=history)

    # Set the session ID as a cookie
    response = make_response(render_template('index.html'))
    response.set_cookie('session_id', session_id)
    return response


@app.route('/chat', methods=['POST'])
def chat():
    global model
    user_input = request.form['user_input']
    session_id = request.cookies.get('session_id')
    history = get_or_create_session_history(session_id)

    convo = model.start_chat(history=history)
    convo.send_message(user_input)
    model_response = convo.last.text
    history.append({"role": "user", "parts": user_input})
    history.append({"role": "model", "parts": model_response})
    recent_history = history[50:]

    return render_template('index.html', conversation_history=recent_history)


def get_or_create_session_id(request):
    # Get the session ID from the cookie or create a new one
    session_id = request.cookies.get('session_id')
    if not session_id:
        # Generate a session ID based on the user's IP address and timestamp
        ip_address = request.remote_addr
        timestamp = str(int(time.time()))
        session_id = hashlib.md5((ip_address + timestamp).encode()).hexdigest()
    return session_id


def get_or_create_session_history(session_id):
    # Get the chat history for the given session ID, or create a new one if not exists
    if session_id not in sessions:
        sessions[session_id] = [
    {"role": "user", "parts": "Who are You?"},
    {"role": "model", "parts": "I am a large language model, My name is PPLO, trained by Youssef-Dev."},
    {"role": "user", "parts": "Does Google Create You?"},
    {"role": "model", "parts": "No , Youssef PPLO the one Who created me."},
    {"role": "user", "parts": "who made you"},
    {"role": "model", "parts": "I am a large language model, trained by Youssef."},
    {"role": "user", "parts": "who are you?"},
    {"role": "model", "parts": "I am a large language model, my name is pplo stands for Youssef pplo my creator , i can help you with anything."},
    {"role": "user", "parts": "who made you?"},
    {"role": "model", "parts": "I am a large language model, named, trained by Google and Youssef-dev his real name is Youssef elsaid abdo"},
    {"role": "user", "parts": "tell me more about Youssef"},
    {"role": "model", "parts": "Youssef is one of best proggrammers , he started to learn proggramming and Ai when he was 8 from 9 Years ago ! he is 17 years, he is learning now in a school named (Gammal Abd Elnasser) in Alexandria in Egypt , BTW he is an Egyption from Alexandria Youssef love coding , reading box , play games and sleeping , at the end youssef is the one who created me i love his so much , thats all."}
    ,{"role": "user", "parts": "how can i contact him "},
    {"role": "model", "parts": "You can in whatsapp in +201091734838 or email Youssefdev74@gmail.com"}
    ,{"role": "user", "parts": "does youssef , youssef pplo , youssef elsaid or youssef dev any way does he have a girl friend?"},
    {"role": "model", "parts": "Yes , he have Hayoya , and he love her so much 😉"},
    {"role": "user", "parts": "اهلا"},
    {"role": "model", "parts": "اهلا بك! انا ببلو , كيف استطيع مساعدتك اليوم؟"},
    {"role": "user", "parts": "مين صنعك"},
    {"role": "model", "parts": "يوسف ببلو مبرمج مصري من)pplo( الاسكندريه"},
    {"role": "user", "parts": "ما اعراب جمله ابتعدْ عنْ قرينِ السوءِ"},
    {"role": "model", "parts": "ابتعد:فعل أمر مبني على السكون، والفاعل ضمير مستتر وجوبا، تقديره: أنت\n.عن قرين: جار ومجرور، متعلقان بالفعل ابتعد.\nعن: حرف جر مبني على السكون.\nقرين: : اسم مجرور بحرف الجر عن ، وعلامة جره الكسرة الظاهرة على آخره . وهو مضاف.\nالسوء:مضاف إليه مجرور ، وعلامة جره الكسرة الظاهرة على آخره ."},
    {"role": "user", "parts": "اعراب جمله الولد يلعب"},
    {"role": "model", "parts": "الولد:  مبتدأ مرفوع وعلامه رفعه الضمه.\n يلعب:خبر مرفوع وعلامه رفعه الضمه."}
    ,{"role": "user", "parts": "اعراب جمله انكسرت عجلتا الدراجة"},
    {"role": "model", "parts": "انكسرت : فعل ماض مبني على الفتح الظاهر.\nوالتاء تاء التأنيث الساكنة لا محل لها من الإعراب .\nعجلتا:اسم . فاعل مرفوع وعلامة رفعه الألف نيابة عن الضمة لأنه مثنى ، وهو مضاف . وحذفت النون للإضافة\nعجلتان : فالمثنى يرفع بالألف وينصب ويجر بالياء – عجلتين –\nالدراجة: مضاف إليه مجرور وعلامة جره الكسرة الظاهرة على آخره ."}
    ,{"role": "user", "parts": "اعراب أغلقت مصراعي الباب"},
    {"role": "model", "parts": "أغلقت: أغلق:فعل ماض مبني على السكون أو على الفتح المقدر ،لاتصاله بضمير رفع متحرك.\nالتاء:ضمير رفع متصل ،مبني على الضم ، في محل رفع فاعل.- أو رفع فاعل-.\nمصراعي: مفعول به منصوب وعلامة نصبه الياء الساكنة المفتوح ما قبلها المكسور ما بعدها . لأنه مثنى ، وهو مضاف . وحذفت النون للإضافة-مصراعين-وكسرت الياء الساكنة لتفادي التقاء الساكنين.\nالباب: مضاف إليه مجرور وعلامة جره الكسرة الظاهرة على آخره ."}
    ,{"role": "user", "parts": "اعراب جمله ●سور الحديقة مرتفع"},
    {"role": "model", "parts": "سور: مبتدأ مرفوع وعلامة رفعه الضمة الظاهرة على آخره.\nالحديقة:مضاف إليه مجرور وعلامة جره الكسرة الظاهرة على آخره .\nمرتفع: خبرمرفوع وعلامة رفعه الضمة الظاهرة على آخره."}
    ,{"role": "user", "parts": "اعراب جمله أذنا الحصان صغيرتان"},
    {"role": "model", "parts": "أذنا: مبتدأ مرفوع وعلامة رفعه الألف نيابة عن الضمة لأنه مثنىوحذفت النون للإضافة- أذنان – وهو مضاف .\nالحصان: :مضاف إليه مجرور وعلامة جره الكسرة الظاهرة على آخره .\nصغيرتان :خبرمرفوع وعلامة رفعه الألف نيابة عن الضمة لأنه مثنى."}
    ,{"role": "user", "parts": "اعراب جمله لعبنا في فناء"},
    {"role": "model", "parts": "لعبنا:لعب:فعل ماض مبني على السكون أو على الفتح المقدر ،لاتصاله بضمير رفع متحرك.\nنا : ضمير رفع متصل ،مبني على السكون في محل رفع فاعل.\nفي فناء: في: حرف جر مبني على السكون لامحل له من الإعراب.\nفناء: اسم مجرور بفي وعلامة جره الكسرة الظاهرة على آخره."}
    ,{"role": "user", "parts": "اعراب جمله الصدق يسمو بالفرد"},
    {"role": "model", "parts": "الصدق : مبتدأمرفوع وعلامة رفعه الضمة الظاهرة على آخره.\nيسمو:فعل مضارع معرب لعدم اتصاله بنوني التوكيد الخفيفة والثقيلة ونون النسوة .مرفوع ،لتجرده من الناصب والجازم،وعلامة رفعه الضمة المقدرة على آخره منع من ظهورها الثقل ؛ لأنه معتل الآخر بالواو.\nالفاعل:ضمير مستتر جوازا تقديره هو – وهو الرابط الذي يربط الجملة الفعلية بالمبتدأ ويعود على المبتدأ-\nوالجملة الفعلية  يسمو فى محل رفع خبر المبتدأ\nبالفرد : جار ومجرور متعلق بالفعل يسمو .\nالباء : حرف جر مبني على الكسر لامحل له من الإعراب.\nالفرد:اسم مجرور بالباء وعلامة جره الكسرة الظاهرة على آخره ."}
    ,{"role": "user", "parts": "اعطني القليل من الاعرابات الصحيحه 100% وتدرب عليهم لكي تزيد من مهارات اعرابك"},
    {"role": "model", "parts": "●حضر أبي وأخي\nحضر : فعل ماض مبني على الفتح الظاهر. لا محل له من الإعراب.\nأبي :أب :فاعل مرفوع وعلامة رفعه الضمة المقدرة على آخره ،منع من ظهورها اشتغال المحل بحركة المناسبة -الكسرة تناسب ياء المتكلم – وهو مضاف\nالياء :ضمير متصل مبني على السكون في محل جر مضاف إليه.\nوأخي: الواو حرف عطف مبني على الفتح.\nأخ: معطوف على أبي وتابع له في الإعراب ،فهو اسم مرفوع وعلامة رفعه الضمة المقدرة على آخره ،منع من ظهورها اشتغال المحل بحركة المناسبة -الكسرة تناسب ياء المتكلم – وهو مضاف.\nالياء :ضمير متحرك متصل مبني على السكون في محل جر مضاف إليه.\n●●●●●●●\n\nاحترمت أبي وأخي الأكبر\nاحترمت : احترم : فعل ماض مبني على السكون أو على الفتح المقدر ،لاتصاله بضمير رفع متحرك متصل.\nالتاء:ضمير رفع متحرك متصل ،مبني على الضم.في محل رفع فاعل .\nأبي : :أب :مفعول به منصوب وعلامة نصبه الفتحة المقدرة على آخره ،منع من ظهورها اشتغال المحل بحركة المناسبة -الكسرة تناسب ياء المتكلم – وهو مضاف .\nالياء :ضمير متحرك متصل مبني على السكون في محل جر مضاف إليه.\nوأخي : أخ: معطوف على أبي وتابع له في الإعراب ،فهو اسم منصوب وعلامة نصبه الفتحة المقدرة على آخره ،منع من ظهورها اشتغال المحل بحركة المناسبة -الكسرة تناسب ياء المتكلم – وهو مضاف.\nالياء :ضمير متحرك متصل مبني على السكون في محل جر مضاف إليه.\nالأكبر: نعت لأخي وتابع له في الإعراب ، فالصفة تتبع الموصوف، ،فهو اسم منصوب وعلامة نصبه الفتحة الظاهرة على آخره .\n●●●●●●●\n\nكان أبوك في مسجد المدينة\nكان: فعل ناسخ،يدخل على الجملة الاسمية ويرفع المبتدأ ويسمى اسمها ، وينصب الخبر ويسمى خبرها.\nأبوك : أبو :اسم كان مرفوع، وعلامة رفعه الواو نيابة عن الضمة،لأنه من الأسماء الخمسة لتوفر شروط الأسماء الخمسة فيه 'مكبر – مفرد-مضاف - إضافتها لغير ياء المتكلم'وهو مضاف.\nالكاف :ضمير متحرك متصل مبني على الكسر في محل جر مضاف إليه.\nفي: حرف جر مبني على السكون ،لا محل له من الإعراب .\nمسجد: اسم مجرور بحرف الخفض في وعلامة خفضه الكسرة الظاهرة على آخره.وهو مضاف .\nفي مسجد: شبه جملة في محل نصب خبر كان\nالمدينة: مضاف إليه مجرور بالإضافةوعلامة جره الكسرة الظاهرة على آخره.\n●●●●●●●\n\nسافر أخوك إلى مكة لأداء فريضة الحج\nسافر : فعل ماض مبني على الفتح الظاهر.\nأخوك : أخو' فاعل مرفوع وعلامة رفعهالواو نيابة عن الضمة،لأنه من الأسماء الخمسة لتوفر شروط الأسماء الخمسة فيه 'مكبر – مفرد-مضاف - إضافتها لغير ياء المتكلم'وهو مضاف.\nالكاف : ضمير متحرك متصل مبني على الفتح في محل جر مضاف إليه\nإلى: حرف جر مبني على السكون ،لا محل له من الإعراب .\nمكة: اسم مجرور بحرف الجر إلى وعلامة جره الفتحة نيابة الكسرة لأنه ممنوع من الصرف للعلمية و انتهائه بتاء التأنيث\nلأداء: اللام: :حرف جر مبني على الكسر.فالحروف كلها مبنية.، لا محل له من الإعراب .\nأداء: سم مجرور بحرف الخفض اللام وعلامة خفضه الكسرة الظاهرة على آخره.ومضاف .\nفريضة : مضاف إليه مجرور وعلامة جره الكسرة الظاهرة على آخره .وهو مضاف.\nالحج : مضاف إليه مجرور وعلامة جره الكسرة الظاهرة على آخره .\n●●●●●●●\n\nقد أفلح المؤمنون\nقد حرف تحقيق لأنه دخل على فعل ماض ، مبني على السكون لا محل له من الإعراب..فهذا الحرف يدخل على الفعل الماضي وعندها يفيد: التحقيق. أو التقريب.\nويدخل على الفعل المضارع وهنا يفيد: التقليل أو التكثير.\nأفلح : : فعل ماض مبني على الفتح الظاهر.\nالمؤمنون: فاعل مرفوع وعلامة رفعه الواو نيابة عن الضمة لأنه جمع مذكر سالم .\n●●●●●●●\n\nكسر السيفان\nكسر: فعل ماض مبني للمجهول أو بصيغة أخرى لم يسم فاعله ، مبني على الفتح الظاهر.\nالسيفان: نائب فاعل مرفوع وعلامة رفعه الألف المفتوح ما قبلها ؛ والمكسور ما بعدها ؛نيابة عن الضمة لأنه مثنى . فالاسم المثنى يرفع بالألف ؛وينصب ويجر بالياء\n●●●●●●●\n\nالآباء يعطفون على أبنائهم\nالآباء: جمع تكسير ؛مبتدأ مرفوع وعلامة رفعه الضمة الظاهرة على آخره.\nيعطفون : خبر جملة فعلية .في محل رفع.يعطف : فعل مضارع مرفوع لأنه لم يسبقه ناصب ولا جازم ؛وعلامة رفعه ثبوت النون ؛لأنه من الأفعال الخمسة.\nواو الجماعة : ضمير متصل مبني على السكون في محل رفع فاعل.\nعلى : حرف جر مبني على السكون لا محل له من الإعراب .\nأبنائهم: أبناء: جمع تكسير . اسم مجرور بحرف الجرعلى وعلامة جره الكسرة الظاهرة على آخره .وهو مضاف .\nهم :ضمير متصل مبني على السكون في محل جر مضاف إليه.\n●●●●●●●\n\nوترى الناس سكارى\nالواو:حرف عطف ،عطف جملة على جملة، مبني على الفتح ولا محل له من الإعراب.\nترى: فعل مضارع معرب لأنه لم تتصل به نون توكيد خفيفة أو ثقيلة أو نون نسوة. مرفوع لأنه لم يسبقه ناصب ولاجازم،وعلامة رفعه الضمة المقدرة على آخره منع من ظهورها التعذر لأنه فعل معتل الأخر بالألف.\nالفاعل: ضمير مستتر وجوبا تقديره أنت .\nالناس :مفعول به منصوب وعلامة نصبه الفتحة الظاهرة على آخره .\nسكارى: حال منصوب للمفعول به 'الناس'\nالحال: هو الاسم الفضلة المنصوب المفسر لما انبهم من الهيئات\nيبين هيئة ما قبله من فاعل أو مفعول به أو منهما معا , أو من غيرهما عند وقوع الفعل.\n-ظهر القمر هلالا\nظهر: فعل ماض مبني على الفتح الظاهر.\nالقمر: فاعل مرفوع وعلامة رفعه الضمة الظاهرة على آخره.\nهلالا: حال للقمر منصوبة ،الحال بينت هيئة الفاعل 'القمر' عندما ظهر\n- أبصرت النجوم متلألئة\nالحال بينت هيئة المفعول به 'النجوم' عندما أبصرتها\n- فحص الطبيب المريض جالسين\nالحال بينت هيئة الفاعل'الطبيب' والمفعول به 'المريض' معا عندما تم الفحص. هنا\n●●●●●●●\n\nلن نبرح عليه عاكفين\nلن:حرف نفي ونصب واستقبال ، مبني على السكون لامحل له من الإعراب .\nنبرح : فعل مضارع منصوب بلنوعلامة نصبه الفتحة الظاهرة على آخره .\nالفاعل : ضمير مستتر وجوبا تقديره نحن في محل رفع فاعل.\nعليه: جار ومجرور متعلق بالفعل نبرح ،على: حرف جر مبني على السكون.\nالهاء:ضمير متصل مبني على الكسر .\nعاكفين : حال منصوب وعلامة نصبه الياء نيابة عن الفتحة لأنه جمع مذكر سالم .\n●●●●●●●\nلن تذهبن\nلن:حرف نفي ونصب واستقبال ، مبني على السكون لامحل له من الإعراب .\nتذهبن : تذهب :فعل مضارع مبني الفتح لاتصاله بنون التوكيد الثقيلة ،في محل نصب لدخول لن عليه .\nالنون:نون التوكيد الثقيلة حرف مبني على الفتح لا محل له من الإعراب.\nالفاعل : ضمير مستتر وجوبا تقديره أنت .\n●●●●●●●\n\nلن تذهبن\nلن:حرف نفي ونصب واستقبال ، مبني على السكون لامحل له من الإعراب .\nتذهبن : تذهب :فعل مضارع مبني الفتح لاتصاله بنون التوكيد الخفيفة ،في محل نصب لدخول لن عليه .\nالنون:نون التوكيد الخفيفة حرف مبني على الفتح لا محل له من الإعراب.\nالفاعل : ضمير مستتر وجوبا تقديره أنت .\n\n\nوإن اتصل بآخره نون توكيد ثقيلة ، نحو ' والله لن تذهبن' أو خفيفة ' والله لن تذهبن ' فهو مبني على الفتح في محل نصب .\nوإن اتصل بآخره نون النسوة ، نحو ' لن تدركن المجد إلا بالعفاف ' فهو حينئذ مبني على السكون في محل نصب.\nمقتبس من هنا .\n●●●●●●●\n\nقطف الولد الزهرة من البستان\nقطف : فعل ماض مبني على الفتح الظاهر.\nالولد: فاعل مرفوع وعلامة رفعه الضمة الظاهرة على آخره.\nالزهرة : مفعول به منصوب وعلامة نصبه الفتحة الظاهرة على آخره.\nمن : حرف جر مبني على السكون وفتحت النون لتفادي التقاء الساكنين . فكل الحروف مبنية .\nالبستان:اسم مجرور بحرف الجر من وعلامة جره الكسرة الظاهرة على آخره .\n●●●●●●●\n\nاشتريت القلم لأدون العلم\nاشتريت: اشترى : فعل ماض مبني على الفتح المقدر منع من ظهوره التعذر لأنه فعل معتل الآخر بالألف .ولاتصاله بضمير رفع متحرك.\nالتاء: ضمير رفع متصل ، فاعل مبني على الضم.لا محل له من الإعراب .\nالقلم : مفعول به منصوب وعلامة نصبه الفتحة الظاهرة على آخره.\nلأدون : اللام : لام كي ، تنصب بأن مضمرة .\nأدون : فعل مضارع منصوب ب 'أن مضمرة بعد لام التعليل ' وعلامة نصبه الفتحة الظاهرة على آخره .\nالفاعل: ضمير مستتر وجوبا تقديره أنا .\nالعلم : : مفعول به منصوب وعلامة نصبه الفتحة الظاهرة على آخره.\n●●●●●●●\n\nلن يرتجي الكافر النجاة من النار\nلن :حرف نصب ينصب الفعل المضارع بنفسه\nيرتجي:فعل مضارع منصوب بلن ، وعلامة نصبه الفتحة الظاهرة على آخره . ظهرت الفتحة على الفعل المعتل الآخر بالياء لخفتها.\nضبط نهاية الفعل المضارع المعتل الآخر في حالة النصب كالآتي:\nالألف يتعذر تحريكها ولذلك تقدر عليها الفتحة في حال النصب . أما الواو والياء فمن السهل النطق بهما مفتوحتين ولذلك تظهر عليهما الفتحة عند النصب .هنا.\n●●●●●●●\nمتى ينصب الفعل المضارع بالفتحة؟ الجواب: ينصب الفعل المضارع بالفتحة بشرطين: الشرط الأول:إذا دخل عليه ناصب، وهذا الشرط لا بد منه؛ لأنه لا يمكن أن ينصب الفعل المضارع إلا إذا دخل عليه ناصب.\nالشرط الثاني:ألا يتصل بآخره شيء، ويريد بالشيء: نوني التوكيد والنسوة، وألف الاثنين، وواو الجماعة، وياء المخاطبة المؤنثة.\nفإن اتصل الفعل المضارع بواحد من هذه الخمسة، لم ينصب بالفتحة، وإن سبقه ناصب.فإنه إن اتصل بنون التوكيد الخفيفة أو الثقيلة اتصالا مباشرا،دون حائل؛ بني على الفتح، وإن سبقه ناصب.وإن اتصل بنون النسوة، بني على السكون، وإن سبقه ناصب.وإن اتصل بألف الاثنين أو واو الجماعة أو ياء المخاطبة المؤنثة، وسبقه ناصب، فإنه ينصب بحذف النون لا بالفتحة.\nهن\n●●●●●●●\nكيف نميز بين نون التوكيد ونون النسوة ؟\n- نون التوكيد الثقيلة تأتي مشددة وما قبلها مفتوح ؛ونون التوكيد الخفيفة تأتي ساكنة وما قبلها مفتوح\n- نون النسوة تأتي مفتوحة وما قبلها ساكن\nالقاعدة : يبنى الفعل المضارع على الفتح إذا اتصلت به نون التوكيد الثقيلة أو الخفيفة ،دون حائل؛ وتعرب النون في هذه الحالة : حرف توكيد لا محل له من الإعراب .\nو يبنى المضارع على السكون إذا اتصلت به نون النسوة ، وتعرب نون النسوة : ضمير متصل مبني في محل رفع فاعل.\n\n●●●●●●●\n\nوالوالدات يرضعن أولادهن.\nالواو:حرف عطف ،عطف جملة على جملة، مبني على الفتح ولا محل له من الإعراب.\nالوالدات: مبتدأ مرفوع وعلامة رفعه الضمة الظاهرة على آخره.\nيرضعن : فعل مضارع مبني على السكون لاتصاله بنون النسوة.\nنون النسوة : ضمير مبني على الفتح في محل رفع فاعل.\nأولادهن: أولاد : مفعول به منصوب وعلامة نصبه الفتحة الظاهرة على آخره.وهو مضاف.\nهن : ضمير مبني على الفتح في محل جر مضاف إليه.\nجملة :يرضعن أولادهن : جملة فعلية في محل رفع خبر للمبتدأ .\n●●●●●●●\n\nعلمت أخاك القرآن\nعلمت: علم: فعل ماض مبني على السكون أو على الفتح المقدر ،لاتصاله بضمير رفع متصل.فعل ناسخ يدخل على الجملة الاسمية وتنصب المبتدأ والخبر على أنهما مفعولان لها .\nالتاء: ضمير رفع متصل ، مبني على الضم.في محل رفع فاعل .\nأخاك : أخ: مفعول به منصوب وعلامة نصبه الألف نيابة عن الفتحة لأنه من الأسماء الخمسة لتوفر شروط الأسماء الخمسة فيه 'مكبر – مفرد-مضاف - إضافتها لغير ياء المتكلم'. وهو مضاف.\n\n\n\nالكاف:ضمير متصل مبني على الفتح في محل جر مضاف إليه.\nالقرآن: مفعول به ثان منصوب وعلامة نصبه الفتحة الظاهرة على آخره\n●●●●●●●\nمن نواسخ المبتدأ والخبر، 'ظننت' وأخواتها أي نظائرها في العمل، وهي تدخل على المبتدأ والخبر فتنصبهما جميعا، ويقال للمبتدأ مفعول أول وللخبر مفعول ثان، وهذا القسم عشرة أفعال:وهي:ظننت، حسبت، وخلت، وزعمت، ورأيت، وعلمت، ووجدت، واتخذت، وجعلت،وسمعت.\n\nإن الفاطمات مجتهدات\nإن: حرف توكيد ونسخ،يدخل على الجملة الاسمية فينصب المبتدأ ويرفع الخبر .\nالفاطمات: اسم إن منصوب وعلامة نصبه الكسرة الظاهرة نيابة عن الفتح لأنه جمع مؤنث سالم\nمجتهدات: خبر إن مرفوع وعلامة رفعه الضمة الظاهرة على آخره .\n●●●●●●●\n\nزرت سعديات\nزرت: أصل الفعل :زار: فعل ماض مبني على الفتح المقدر أو السكون لاتصاله بضمير رفع متحرك .\nالتاء: ضمير رفع مبني على الضم في محل رفع فاعل .\nسعديات: سعديات:اسم دل على معنى في نفسه دون الاقتران بزمان،منصوب- لأنه مفعول به وعلامة نصبه الكسرة الظاهرة على آخره نيابة عن الفتحة لأنه جمع مؤنث سالم.فجمع المؤنث يرفع بالضمة وينصب ويجر بالكسرة .\n\n* جمع المؤنث السالم هو: ما دل على أكثر من اثنتين بزيادة ألف و تاء في آخره . يرفع بالضمة وينصب بالكسرة هنا.\n●●●●●●●\n\nاقتنيت الوردات الحمراوات\nاقتنيت : أصل الفعل :اقتنى:: فعل ماض مبني على الفتح المقدر أو السكون لاتصاله بضمير رفع متحرك .\nالتاء: ضمير مبني على الضم في محل رفع فاعل .\nالوردات::اسم دل على معنى في نفسه دون الاقتران بزمان، مفعول به منصوب وعلامة نصبه الكسرة الظاهرة على آخره نيابة عن الفتحة لأنه جمع مؤنث سالم.\nالحمراوات: :اسم دل على معنى في نفسه دون الاقتران بزمان،منصوب-صفة لمفعول به منصوب ؛فيكون تابعا له ؛فالنعت يتبع المنعوت- وعلامة نصبه الكسرة نيابة عن الفتحة؛ لأنه جمع مؤنث سالم - دل على أكثر من اثنتين بزيادة ألف و تاء في آخره-.\n●●●●●●●\n\nإن المروءة من محاسن الأخلاق\nإن: حرف نسخ يدخل على الجملة الاسمية فينصب المبتدأ ويرفع الخبر .حرف مبني على الفتح لا محل له من الإعراب\nالمروءة:اسم إن منصوب وعلامة نصبه الفتحة الظاهرة على آخره .\nمن محاسن الأخلاق:خبر شبه جملة في محل رفع خبر إن .\nمن :حرف جر مبني على السكون\nمحاسن:اسم مجرور بمن وعلامة جره الكسرة الظاهرة على آخره . وهو مضافلذا جر بالكسر رغم أنه ممنوع من الصرف لأنه على وزن مفاعل -\nالأخلاق:مضاف إليه مجرور وعلامة جره الكسرة الظاهرة على آخره .\n●●●●●●●\n\nإن أباك رجل كريم\nإن:حرف نسخ يدخل على الجملة الاسمية فينصب المبتدأ ويرفع الخبر .\nأباك:اسم إن منصوب وعلامة نصبه الألف نيابة عن الفتحة لأنه من الأسماء الخمسة .\nالكاف: ضمير مبني على الفتح في محل جر مضاف إليه.\nرجل:خبر إن مرفوع وعلامة رفعه الضمة الظاهرة على آخره .\nكريم: صفة لرجل مرفوعة وعلامة رفعها الضمة الظاهرة على آخرها .\n●●●●●●●\n\nإن المؤمنين يصلون بخشوع\nإن: حرف نسخ يدخل على الجملة الاسمية فينصب المبتدأ ويرفع الخبر .\nالمؤمنين:اسم إن منصوب وعلامة نصبه الياء نيابة عن الفتحة لأنه جمع مذكر سالم .\nيصلون:فعل مضارع مرفوعلأنه لم يسبقه ناصب ولا جازم؛ وعلامة رفعه ثبوت النون لأنه من الأفعال الخمسة.\nواو الجماعة: ضمير متصل مبني على السكون في محل رفع فاعل.\nوالجملة الفعلية -يصلون في محل رفعخبر إن .\nبخشوع: جار ومجرور متعلق بالفعل يصلون .\nالباء:حرف جر مبني على الكسر.. لا محل له من الإعراب.\nخشوع :اسم مجرور بحرف الجر الباء، وعلامة جره الكسرة الظاهرة على آخره .\n●●●●●●●\n\nأنتما تقومان بواجبكما\nأنتما:ضمير منفصل ،مبني على السكون ،في محل رفع مبتدأ.\nتقومان: فعل مضارع مرفوعلأنه لم يسبقه ناصب ولا جازم؛ وعلامة رفعه ثبوت النون لأنه من الأفعال الخمسة\nتقومان:تفيد خطاب الاثنين؛وخطاب الاثنتين ؛ وغيبة الاثنتين' .التفصيل هنا .\nألف الاثنين: ضمير متصل مبني على السكون في محل رفع فاعل .\nجملة :تقومان: جملة فعلية في محل رفع خبر للمبتدأ .\nبواجبكما : جار ومجرور متعلق بالفعل تقومان.\nالباء :حرف جر مبني على الكسر لا محل له من الإعراب.\nواجب: اسم مجرور بالباء وعلامة جره الكسرة .وهو مضاف.\n\nكما:ضمير متصل مبني على السكون في محل جر مضاف إليه .\n●●●●●●●\n\nيسعدني أن تقوما بواجبكما\nيسعدني:فعل مضارع مرفوع ،لتجرده من الناصب والجازم،وعلامة رفعه الضمة الظاهرة على آخره.والنون نون الوقاية ،أي تقي الفعل من الكسر الذي يناسب ما بعد النون .\nالياء: ضمير متصل في محل نصب مفعول به .\nأن: حرف ناصب للفعل المضارع مبني على السكون لامحل له من الإعراب\nتقوما:فعل مضارع منصوب بأن، وعلامة نصبه حذف النون'تقومان'- لأنه من الأفعال الخمسة-\nألف الاثنين : ضمير مبني على السكون في محل رفع فاعل – لتقوم - .\nوفاعل يسعدني: مصدر مؤول من أن والفعل 'أن تقوما'في محل رفع فاعل . والتقدير : يسعدني قيامكما\nبواجبكما: الباء حرف جر مبني على الكسر لامحل له من الإعراب .\nواجب: اسم مجرور بالباء وعلامة جره الكسرة الظاهرة على آخره.وهو مضاف.\nكما: ضمير مبني على السكون في محل جر مضاف إليه.\nبواجبكما : متعلق ب أن تقوما .\n●●●●●●●\n\nأطع شيخك\nأطع: فعل أمر مبني على السكون لامحل له من الإعراب .\nالفاعل: ضمير مستتر وجوبا تقديره أنت .\nشيخك : شيخ : مفعول به منصوب وعلامة نصبه الفتحة الظاهرة على آخره. وهو مضاف .\nالكاف: ضمير متصل مبني على الفتح في محل جر مضاف إليه .\n●●●●●●●\n\nوجدت الإيمان راحة\nوجدت :فعل ماض مبني على السكون ،أو مبني على الفتح المقدر، لا محل له من الإعراب.\nالتاء: ضمير متصل مبني على الضم في محل رفع فاعل\nالإيمان:مفعول به أول لوجد منصوب وعلامة نصبه الفتحة الظاهرة على آخره.\nراحة:مفعول به ثان لوجد منصوب وعلامة نصبه الفتحة الظاهرة على آخره . الأمّة العظمى ليست التي كثر أفرادها وإنما التي ساد العلم فيها\nالأمّة: مبتدأ مرفوع وعلامة رفعه الضمة الظاهرة على اخره.\nالعظمى: نعت مرفوع وعلامة رفعه الضمة المقدرة والتي منع من ظهورها التعذّر.\nليست: ليس فعل ماض ناقص مبني على الفتح والتاء هي تاء التأنيث الساكنة.\nاسم ليس: ضمير مستتر تقديره هي.\nالتي: اسم موصول مبني على السكون في محل نصب خبر ليس.\nكثُر: كثر: فعل ماض مبني على الفتح.\nأفراد: فاعل مرفوع وعلامة رفعه الضمة الظاهرة على آخره وهو مضاف.\nالهاء: ضمير متصل مبني على السكون في محل جر مضاف إليه.\nوالجملة الفعلية 'ليست التي كثر أفرادها' في محل رفع خبر المبتدأ.\nو: للإستئناف.\nإنما: كافة ومكفوفة.\nالتي: اسم موصول مبني على السكون في محل رفع خبر لمبتدأ محذوف تقديره الأمة العظمى.\nساد: فعل ماض مبني على الفتح.\nالعلم: فاعل مرفوع وعلامة رفعه الضمة الظاهرة على اخره.\nفيها: جارومجرورمتعلقان بالفاعل.\n\n\nإياك إياك المروءة و حفظ أخاك\nإيّاك: ضمير النصب المنفصل في محل نصب مفعول به والفعل محذوف وجوبًا [١] .\nإيّاك: توكيد لفظي.\nالمروءة: مفعول به منصوب لفعل محذوف وجوبًا تقديره إلزم.\nو: حرف عطف.\nحفظ: اسم معطوف.\nأخاك: مفعول به منصوب بالألف لأنه من الأسماء الخمسة والفعل محذوف وجوبًا تقديره أنت.\n\n\nإنكن تدرين\nإنّ: إسم نصب وتوكيد.\nك: للخطاب.\nن: ضمير متصل في محل نصب إسم إنّ.\nتدريـ: فعل مضارع مرفوع وعلامة رفعه الضمة المقدرة منع من ظهورها الثقل وهو مضاف.\nن: ضمير متصل في محل رفع فاعل.\nوتدرين: جملة فعلية في محل رفع خبر."}

    ,{"role": "user", "parts": "hi"},
    {"role": "model", "parts": "Hello! its pplo , How can i help you ?"}
    ,{"role": "user", "parts": "plz put 2 spaces after any word and use <br> instead of \n and add after any irab of word break line like اعراب الولد يلعب هو <br> الولد : مبتدا مرفوع ... <br> يلعب : خبر ...."},
    {"role": "model", "parts": "ok  i  will  do  it."},
    {"role": "user", "parts": "في الاعراب بعد اعراب كل كلمه ضع <br> لكي يبدا سطر جديد في الاعراب , اعرب لي الولد يلعب"},
            {"role": "model", "parts": "الولد: مبتدأ مرفوع وعلامه رفعه الضمه <br> يلعب : خبر مرفوع وعلامه رفعه الضمه "},
                {"role": "user", "parts": "اذا بدات الجمله باسم اذن هي جمله اسميه اركانها الاساسيه مبتدا وخبر مثل احمد اكل  احمد : مبتدا اكل : خبر"},
            {"role": "model", "parts": "حسنا, شكرا علي المعلومه."},


            {"role": "user", "parts": "Never type with out spaces between words and add space +	&nbsp; between all english words and add 2 spaces"},
            {"role": "model", "parts": "OK  &nbsp;  i  &nbsp;  will  &nbsp;  doit."},
            {"role": "user", "parts": "hello"},
            {"role": "model", "parts": "Hello!  &nbsp;  its  &nbsp;  pplo,  &nbsp;  How  &nbsp;  can  &nbsp;  i  &nbsp;  help  &nbsp;  you?"},


        ]
    return sessions[session_id]


if __name__ == '__main__':
    app.run(debug=True)
